{
  "title": "Wallet â€” Balance & Ledger",
  "tags": ["exchange","wallet"],
  "panels": [
    { "type": "stat", "title": "Processed Applied",
      "targets": [{ "expr": "sum(increase(wallet_processed_total{result=\"applied\"}[5m]))" }] },
    { "type": "stat", "title": "Idempotent Hits",
      "targets": [{ "expr": "sum(increase(wallet_idempotent_total[5m]))" }] },
    { "type": "graph", "title": "Batch p95 Latency (ms)",
      "targets": [{ "expr": "histogram_quantile(0.95, sum by (le) (rate(wallet_batch_latency_ms_bucket[5m])))" }] },
    { "type": "graph", "title": "Balance Update Latency (ms)",
      "targets": [{ "expr": "histogram_quantile(0.95, sum by (le) (rate(wallet_balance_update_latency_ms_bucket[5m])))" }] },
    { "type": "graph", "title": "DB/Kafka Errors",
      "targets": [
        { "expr": "increase(wallet_db_errors_total[10m])" },
        { "expr": "increase(wallet_kafka_errors_total[10m])" }
      ]
    }
  ],
  "schemaVersion": 39,
  "version": 1
}
